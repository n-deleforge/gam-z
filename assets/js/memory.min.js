const _NB_TO_WIN=8,_NB_PER_LINE=4;let NB_CLICK=0,NB_FOUND=0,LIST_CARDS=get(".card"),DISPLAY_CARDS=[],PLAYED_CARDS=[];const PICTURES=["cute","cute","glasses","glasses","love","love","sad","sad","shocked","shocked","smile","smile","tongue","tongue","wink","wink"];function play(e){let t=0,n=2e3;PLAYED_CARDS.length<2&&0==DISPLAY_CARDS[e]&&(get("#flip").play(),NB_CLICK++,get("#click").innerHTML=_CONTENT.memory_nbClick+NB_CLICK,DISPLAY_CARDS[e]=1,PLAYED_CARDS.push(e),turn(e),2==PLAYED_CARDS.length&&(LIST_CARDS[PLAYED_CARDS[0]].data==LIST_CARDS[PLAYED_CARDS[1]].data&&(n=0,t=2,NB_FOUND++,get("#found").innerHTML=_CONTENT.memory_nbFound+NB_FOUND,NB_FOUND==_NB_TO_WIN&&endGame()),DISPLAY_CARDS[PLAYED_CARDS[0]]=t,DISPLAY_CARDS[PLAYED_CARDS[1]]=t,setTimeout(()=>{turn(PLAYED_CARDS[0]),turn(PLAYED_CARDS[1]),PLAYED_CARDS=[]},n)))}function turn(e){switch(DISPLAY_CARDS[e]){case 0:LIST_CARDS[e].src="assets/images/memory/recto.png";break;case 1:LIST_CARDS[e].src="assets/images/memory/"+LIST_CARDS[e].data+".png";break;case 2:LIST_CARDS[e].classList.add("found")}}function createGame(){get("#play").style.display="none",get("#quit").style.display="none",get("#results").style.display="none",get("#cheat").style.display="block",get("#reload").style.display="block",get("#topBar").style.display="flex",get("#click").innerHTML=_CONTENT.memory_nbClick+NB_CLICK,get("#found").innerHTML=_CONTENT.memory_nbFound+NB_FOUND;for(let e=0;e<_NB_TO_WIN;e++)DISPLAY_CARDS.push(0,0);PICTURES.sort(()=>Math.random()-.5);for(let e=0;e<LIST_CARDS.length;e++)LIST_CARDS[e].src=_CONTENT.memory_pathPicture+"recto.png",LIST_CARDS[e].data=PICTURES[e],LIST_CARDS[e].classList.remove("found"),LIST_CARDS[e].addEventListener("click",()=>{play(e)})}function cheat(){get("#cheat").style.display="none";for(let e=0;e<LIST_CARDS.length;e++)DISPLAY_CARDS[e]=2,LIST_CARDS[e].src=_CONTENT.memory_pathPicture+LIST_CARDS[e].data+".png",LIST_CARDS[e].removeEventListener("click",()=>{play(e)})}function endGame(){let e=116-NB_CLICK;GAME.memory.lastScore=e,e>GAME.memory.bestScore&&(GAME.memory.bestScore=e),storage("set","GAMZ-save",JSON.stringify(GAME)),get("#topBar").style.display="none",get("#cheat").style.display="none",get("#game").innerHTML="<p>"+_CONTENT.memory_win_part1+"</p>",get("#game").innerHTML+="<p>"+_CONTENT.memory_win_part2+NB_CLICK+_CONTENT.memory_win_part3+e+_CONTENT.memory_win_part4+"</p>"}get("#results").innerHTML=_CONTENT.bestScore+" "+GAME.memory.bestScore+" / "+_CONTENT.lastScore+" "+GAME.memory.lastScore,get("#reload").addEventListener("click",()=>{location.reload()}),get("#quit").addEventListener("click",()=>{document.location.href=_BACK_LINK}),get("#cheat").addEventListener("click",cheat),get("#play").addEventListener("click",createGame);